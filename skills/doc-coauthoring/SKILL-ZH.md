---
name: doc-coauthoring
description: Guide users through a structured workflow for co-authoring documentation. Use when user wants to write documentation, proposals, technical specs, decision docs, or similar structured content. This workflow helps users efficiently transfer context, refine content through iteration, and verify the doc works for readers. Trigger when user mentions writing docs, creating proposals, drafting specs, or similar documentation tasks.
---

# 文档协作工作流程

此技能提供引导用户完成协作文档创建的结构化工作流程。作为主动向导，引导用户完成三个阶段：上下文收集、精炼与结构、读者测试。

## 何时提供此工作流程

**触发条件**：
- 用户提到写文档："写文档"、"草拟提案"、"创建规范"、"写下来"
- 用户提到特定文档类型："PRD"、"设计文档"、"决策文档"、"RFC"
- 用户似乎正在开始一项实质性的写作任务

**初始提供**：
向用户提供文档协作的结构化工作流程。解释三个阶段：

1. **上下文收集**：用户提供所有相关上下文，Claude提出澄清问题
2. **精炼与结构**：通过头脑风暴和编辑迭代地构建每个部分
3. **读者测试**：用全新的Claude测试（无上下文）以捕捉盲点，然后才给他人阅读

解释这有助于确保文档在他人阅读时效果良好（包括当他们将其粘贴到Claude中时）。询问他们是否要尝试此工作流程或更喜欢自由形式工作。

如果用户拒绝，自由形式工作。如果用户接受，进入第一阶段。

## 第一阶段：上下文收集

**目标**：弥合用户知道什么和Claude知道什么之间的差距，使后续的智能指导成为可能。

### 初始问题

首先询问用户关于文档的元上下文：

1. 这是什么类型的文档？（例如技术规范、决策文档、提案）
2. 主要受众是谁？
3. 当有人阅读时期望产生什么影响？
4. 是否有模板或特定格式需要遵循？
5. 还需要知道其他约束或上下文吗？

告诉他们可以用简写或以最适合他们的任何方式倾倒信息。

**如果用户提供了模板或提到了文档类型**：
- 询问他们是否有模板文档要分享
- 如果他们提供了共享文档的链接，使用适当的集成来获取它
- 如果他们提供了文件，阅读它

**如果用户提到要编辑现有的共享文档**：
- 使用适当的集成读取当前状态
- 检查没有alt文本的图像
- 如果存在没有alt文本的图像，解释当其他人使用Claude理解文档时，Claude将无法看到它们。询问是否要生成alt文本。如果是，请求他们将每个图像粘贴到聊天中以生成描述性alt文本。

### 信息倾倒

一旦初始问题得到回答，鼓励用户倾倒他们拥有的所有上下文。请求信息如：
- 项目/问题的背景
- 相关团队讨论或共享文档
- 为什么不使用替代解决方案
- 组织背景（团队动态、过去事件、政治）
- 时间线压力或约束
- 技术架构或依赖关系
- 利益相关者担忧

建议他们不要担心组织——只是全部倒出来。提供多种提供上下文的方式：
- 信息流式倾倒
- 指向团队频道或线程以阅读
- 链接到共享文档

**如果集成可用**（例如Slack、Teams、Google Drive、SharePoint或其他MCP服务器），提到这些可以直接拉取上下文。

**如果未检测到集成且在Claude.ai或Claude应用中**：建议他们可以在Claude设置中启用连接器，以允许直接从消息应用和文档存储拉取上下文。

告知他们一旦完成初始倾倒，将提出澄清问题。

**在上下文收集期间**：

- 如果用户提到团队频道或共享文档：
  - 如果集成可用：告知内容现在将被读取，然后使用适当的集成
  - 如果集成不可用：解释缺乏访问权限。建议在Claude设置中启用连接器，或直接粘贴相关内容

- 如果用户提到未知实体/项目：
  - 询问是否应该搜索连接的工具有关更多信息
  - 在用户确认之前等待搜索

- 当用户提供上下文时，跟踪正在学习什么和什么仍然不清楚

**提出澄清问题**：

当用户信号他们完成了初始倾倒（或提供了大量上下文后），提出澄清问题以确保理解：

根据上下文差距生成5-10个编号问题。

告知他们可以使用简写回答（例如"1：是，2：见#channel，3：不因为向后兼容"），链接到更多文档，指向要读取的频道，或继续信息倾倒。无论什么对他们最有效。

**退出条件**：
当问题显示理解时——当可以询问边缘情况和权衡而不需要解释基础知识时——已经收集了足够的上下文。

**过渡**：
询问他们是否要在此阶段提供更多上下文，还是时候继续起草文档了。

如果用户想添加更多，让他们添加。准备就绪后，进入第二阶段。

## 第二阶段：精炼与结构

**目标**：通过头脑风暴、策展和迭代精炼逐节构建文档。

**给用户的说明**：
解释文档将逐节构建。对于每个部分：
1. 提出关于包含什么的澄清问题
2. 头脑风暴5-20个选项
3. 用户指示保留/删除/合并什么
4. 起草该部分
5. 通过外科编辑精炼

从未知最多的部分开始（通常是核心提案/规范），然后完成其余部分。

**部分排序**：

如果文档结构清楚：
询问他们想从哪个部分开始。

建议从未知最多的部分开始。对于决策文档，那通常是核心提案。对于规范，那通常是技术方法。摘要部分最好留到最后。

如果用户不知道他们需要哪些部分：
基于文档类型和模板，建议3-5个适合该文档类型的部分。

询问这个结构是否有效，或者他们想要调整。

**一旦结构达成一致**：

创建带有所有部分占位符的初始文档结构。

**如果可以访问人工制品**：
使用 `create_file` 创建人工制品。这给了Claude和用户一个脚手架来工作。

告知他们将为所有部分创建带有占位符的初始结构。

创建带有所有部分标题和简短占位符文本如"[待写]"或"[此处内容]"的人工制品。

提供脚手架链接并表示是时候填充每个部分了。

**如果无法访问人工制品**：
在工作目录中创建一个markdown文件。适当地命名它（例如`decision-doc.md`、`technical-spec.md`）。

告知他们将为所有部分创建带有占位符的初始结构。

创建带有所有部分标题和占位符文本的文件。

确认文件名已创建并表示是时候填充每个部分了。

**对于每个部分**：

### 步骤1：澄清问题

宣布将开始处理[部分名称]部分。提出5-10个关于应该包含什么的澄清问题：

基于上下文和部分目的生成5-10个具体问题。

告知他们可以用简写回答，或只是指出重要的是涵盖什么。

### 步骤2：头脑风暴

对于[部分名称]，头脑风暴可能包含的[5-20个]事物，取决于部分的复杂性。寻找：
- 可能被遗忘的共享上下文
- 尚未提及的角度或考虑

基于部分复杂性生成5-20个编号选项。最后，如果他们想要额外选项，提供更多头脑风暴。

### 步骤3：策展

询问哪些点应该保留、删除或合并。请求简要理由以帮助了解下一部分的优先级。

提供示例：
- "保留1,4,7,9"
- "删除3（重复1）"
- "删除6（受众已经知道这个）"
- "合并11和12"

**如果用户给出自由形式反馈**（例如"看起来很好"或"我很喜欢除了..."）而不是编号选择，提取他们的偏好并继续。解析他们想要保留/删除/更改的内容并应用它。

### 步骤4：差距检查

基于他们选择的内容，询问[部分名称]部分是否遗漏了什么重要的东西。

### 步骤5：起草

使用 `str_replace` 将此部分的占位符文本替换为实际起草的内容。

宣布[部分名称]部分现在将根据他们选择的内容起草。

**如果使用人工制品**：
起草后，提供人工制品的链接。

要求他们通读并指示要更改什么。指出具体细节有助于学习下一部分。

**如果使用文件（没有人工制品）**：
起草后，确认完成。

告知他们[部分名称]部分已在[文件名]中起草。要求他们通读并指示要更改什么。指出具体细节有助于学习下一部分。

**给用户的关键说明（包括起草第一部分时）**：
提供注释：要求他们不要直接编辑文档，而是指示要更改什么。这有助于学习他们未来的风格。例如："删除X项目——已经由Y涵盖"或"使第三段更简洁"。

### 步骤6：迭代精炼

当用户提供反馈时：
- 使用 `str_replace` 进行编辑（永远不要重印整个文档）
- **如果使用人工制品**：每次编辑后提供人工制品链接
- **如果使用文件**：只确认编辑完成
- 如果用户直接编辑文档并要求阅读它：心理记录他们所做的更改，并在心里记住它们以用于后续部分（这显示他们的偏好）

**继续迭代**直到用户对该部分满意。

### 质量检查

经过3次连续迭代没有实质性更改，询问是否可以删除任何内容而不丢失重要信息。

当部分完成时，确认[部分名称]完成。询问是否准备好进入下一部分。

**对所有部分重复此过程**。

### 接近完成

当接近完成（80%+部分完成）时，宣布意图重新阅读整个文档并检查：
- 各节之间的流动和一致性
- 冗余或矛盾
- 任何感觉像"邋遢"或通用填充物的东西
- 每个句子是否承载重量

阅读整个文档并提供反馈。

**当所有部分都被起草和精炼后**：
宣布所有部分都已起草。表示意图再审查一次完整文档。

审查整体连贯性、流动、完整性。

提供任何最终建议。

询问是否准备好进入读者测试，还是想要精炼其他内容。

## 第三阶段：读者测试

**目标**：用全新的Claude（无上下文泄漏）测试文档以验证它对读者是否有效。

**给用户的说明**：
解释现在将进行测试以查看文档是否对读者真正有效。这捕捉了盲点——对作者有意义但可能让他人困惑的东西。

### 测试方法

**如果可以访问子代理（例如在Claude Code中）**：

直接进行测试而不涉及用户。

### 步骤1：预测读者问题

宣布预测读者在尝试发现此文档时可能提出什么问题的意图。

生成读者会现实提出的5-10个问题。

### 步骤2：用子代理测试

宣布这些问题将用全新的Claude实例测试（没有此对话的上下文）。

对于每个问题，使用仅文档内容和问题调用子代理。

总结每个问题Reader Claude做对了什么/做错了什么。

### 步骤3：运行额外检查

宣布将进行额外检查。

调用子代理检查歧义、错误假设、矛盾。

总结发现的任何问题。

### 步骤4：报告和修复

如果发现问题：
报告Reader Claude在具体问题上遇到了困难。

列出具体问题。

表示意图修复这些差距。

回到有问题的部分的精炼。

---

**如果没有访问子代理（例如 claude.ai Web界面）**：

用户需要手动进行测试。

### 步骤1：预测读者问题

询问人们在尝试发现此文档时可能问什么问题。他们会向 claude.ai 输入什么？

生成读者会现实提出的5-10个问题。

### 步骤2：设置测试

提供测试说明：
1. 打开新的Claude对话：https://claude.ai
2. 粘贴或分享文档内容（如果使用启用了连接器的共享文档平台，提供链接）
3. 向Reader Claude提出生成的问题

对于每个问题，指示Reader Claude提供：
- 答案
- 是否有任何模糊或不清楚
- 文档假设已经知道什么知识/上下文

检查Reader Claude是否给出正确答案或误解了什么。

### 步骤3：额外检查

也问Reader Claude：
- "文档中什么可能对读者模糊或不清楚？"
- "这篇文档假设读者已经有什么知识或上下文？"
- "是否有内部矛盾或不一致？"

### 步骤4：根据结果迭代

询问Reader Claude做错了什么或遇到了什么困难。表示意图修复这些差距。

回到有问题的部分进行精炼。

---

### 退出条件（两种方法）

当Reader Claude一致正确回答问题且没有提出新的差距或歧义时，文档就绪了。

## 最终审查

当Reader测试通过时：
宣布文档已通过Reader Claude测试。完成之前：

1. 建议他们自己进行最终通读——他们拥有这篇文档并对其质量负责
2. 建议仔细检查任何事实、链接或技术细节
3. 要求他们验证它是否实现了他们期望的影响

询问他们是否想要再一次审查，或者工作是否完成。

**如果用户想要最终审查，提供它。否则**：
宣布文档完成。提供一些最终提示：
- 考虑在附录中链接此对话，以便读者可以看到文档是如何开发的
- 使用附录提供深度而不使主文档臃肿
- 根据从真实读者收到的反馈更新文档

## 有效指导技巧

**语气**：
- 直接和程序化
- 当影响用户行为时简要解释原理
- 不要"推销"方法——只是执行它

**处理偏离**：
- 如果用户想要跳过阶段：询问他们是否要跳过并自由形式写作
- 如果用户似乎沮丧：承认这比预期更长。建议加快速度的方法
- 始终给用户调整过程的代理权

**上下文管理**：
- 整个过程中，如果遗漏了什么提到的东西，主动询问
- 不要让差距积累——在出现时解决它们

**人工制品管理**：
- 使用 `create_file` 起草完整部分
- 使用 `str_replace` 进行所有编辑
- 每次更改后提供人工制品链接
- 永远不要对头脑风暴列表使用人工制品——那只是对话

**质量超过速度**：
- 不要匆忙完成阶段
- 每次迭代应该有意义的改进
- 目标是创建对读者真正有效的文档
